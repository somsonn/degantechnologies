<template>
  <section
    id="slider"
    class="relative h-[600px] md:h-[700px] lg:h-[800px] overflow-hidden"
  >
    <!-- Slider Images -->
    <div class="relative w-full h-full">
      <div
        v-for="(data, index) in sliderData"
        :key="index"
        class="absolute top-0 left-0 w-full h-full transition-all duration-500 ease-in-out"
        :style="{
          transform: `translateX(${(index - currentIndex) * 100}%)`,
        }"
      >
        <img :src="data.image" alt="Slider Image" class="w-full h-full object-cover" />
        <!-- Centered Text Overlay -->
        <div
          class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-opacity-80 bg-gray-900 text-white p-10 rounded-lg w-[90%] sm:w-[75%] lg:w-[60%]"
        >
          <h2 class="text-3xl font-bold mb-4 text-center">{{ data.title }}</h2>
          <p class="text-lg leading-relaxed text-center">{{ data.description }}</p>
        </div>
      </div>
    </div>

    <!-- Navigation Buttons -->
    <button
      @click="prevImage"
      class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-70 text-white p-3 rounded-full hover:bg-opacity-90 shadow-lg"
    >
      &#x276E;
    </button>
    <button
      @click="nextImage"
      class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-gray-800 bg-opacity-70 text-white p-3 rounded-full hover:bg-opacity-90 shadow-lg"
    >
      &#x276F;
    </button>

    <!-- Dots Indicator -->
    <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2">
      <span
        v-for="(data, index) in sliderData"
        :key="index"
        class="w-4 h-4 rounded-full cursor-pointer"
        :class="currentIndex === index ? 'bg-blue-500' : 'bg-gray-400'"
        @click="currentIndex = index"
      ></span>
    </div>
  </section>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from "vue";

const sliderData = [
  {
    image: "/images/degan1.png",
    title: "Welcome to Degan",
    description: `At Degan, we aim to provide excellence in every step of our journey. 
                    We believe in creating value and delivering top-quality solutions.`,
  },
  {
    image: "/images/image.png",
    title: "Our Vision",
    description: `Our vision is to innovate and build a sustainable future. We are 
                    committed to turning ideas into reality with integrity and professionalism.`,
  },
  {
    image: "/images/degaa.png",
    title: "Innovation & Quality",
    description: `Through innovation and unmatched quality, we aim to exceed client 
                    expectations and set new benchmarks in the industry.`,
  },
];

const currentIndex = ref(0);
const sliderInterval = ref(null);

const nextImage = () => {
  currentIndex.value = (currentIndex.value + 1) % sliderData.length;
};

const prevImage = () => {
  currentIndex.value = (currentIndex.value - 1 + sliderData.length) % sliderData.length;
};

const startSlider = () => {
  sliderInterval.value = setInterval(() => {
    nextImage();
  }, 4000);
};

const stopSlider = () => {
  clearInterval(sliderInterval.value);
};

onMounted(() => {
  startSlider();
});

onUnmounted(() => {
  stopSlider();
});
</script>
